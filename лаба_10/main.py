"""
–ê–±–¥—É–ª–ª–∞–µ–≤ –®–∞—Ö–º–∞—Ä –ò–£7-14–ë
–ù–∞–ø–∏—Å–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –ø—Ä–∏–±–ª–∏–∂—ë–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞
–∏–∑–≤–µ—Å—Ç–Ω–æ–π, –∑–∞–¥–∞–Ω–Ω–æ–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤—É–º—è —Ä–∞–∑–Ω—ã–º–∏ –º–µ—Ç–æ–¥–∞–º–∏:—Å—Ä–µ–¥–∏–Ω–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –∏ –ø–∞—Ä–∞–±–æ–ª.
–î–∞–ª–µ–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π, –∑–∞–¥–∞–Ω–Ω–æ–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ, –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –∫–∞–∫–æ–π
–º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.
–í—ã—á–∏—Å–ª—è–µ—Ç –∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—É—é –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –∫–∞–∂–¥–æ–≥–æ –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π.
–ó–∞—Ç–µ–º –¥–ª—è –¥—Ä—É–≥–æ–≥–æ, –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∏—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ –≤—ã—á–∏—Å–ª—è–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–∫–æ–≤
—Ä–∞–∑–±–∏–µ–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞–ª –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é, –Ω–∞ –æ—Å–Ω–æ–≤–µ
—Ñ–æ—Ä–º—É–ª—ã: |ùêº(ùëÅ) ‚àí ùêº(2ùëÅ)| < Œµ
–í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è
–µ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.
"""

from math import sin, cos

from module import *


def f(x):
    # return 1 / (1 + x**2)
    return sin(x)


def F(x):
    # return atan(x)
    return -cos(x)


# –í–≤–æ–¥–∏–º –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω—Ü–µ –æ—Ç—Ä–µ–∑–∫–∞
a, b = input_ends()

# –í–≤–æ–¥–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–∑–±–∏–µ–Ω–∏—è
N1 = input_partitions()
N2 = input_partitions()

# –°—á–∏—Ç–∞–µ–º –∏–Ω—Ç–µ–≥—Ä–∞–ª—ã –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –æ—Ç—Ä–µ–∑–∫–∞ –∏ —Ä–∞–∑–±–∏–µ–Ω–∏–π –¥—è–ª –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞
methods_values = [
    rectangle_method(f, a, b, N1),
    rectangle_method(f, a, b, N2),
    parabola_method(f, a, b, N1),
    parabola_method(f, a, b, N2)
]

# –í—ã–≤–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É –≤–∏–¥–∞ –º–µ—Ç–æ–¥-—Ä–∞–∑–±–∏–µ–Ω–∏–µ
print_table_partition(methods_values.copy())

# –í—ã—Å—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ –Ω–∞ –æ—Ç—Ä–µ–∑–∫–µ
correct_value = F(b) - F(a)
# –í—ã–≤–æ–¥–∏—Ç —Ç–∞–±–ª–∏—Ü—É –≤–∏–¥–∞ –º–µ—Ç–æ–¥-–ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å
print_table_accuracy(correct_value, methods_values.copy())

# –û–ø—Ä–µ–¥–µ–ª—è–µ–º –º–µ—Ç–æ–¥, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–∞–ª–æ —Å–∞–º–æ–µ –Ω–µ—Ç–æ—á–Ω–æ–µ –∫ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π, –∏ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ
inaccurate_value, inaccurate_method = find_current_method(
    calc_absolut_values(correct_value, methods_values.copy())
)

# –í–≤–æ–¥–∏–º —Ç–æ—á–Ω–æ—Å—Ç—å
eps = input_eps()
# –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è –¥–ª—è –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏, –æ—Ç—Ä–µ–∑–∫–∞ –∏ –º–µ—Ç–æ–¥–∞
calc_partition_sections(inaccurate_method, eps, a, b, f, correct_value)
